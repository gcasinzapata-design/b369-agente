'use client'; import {useState} from 'react'; export default function FilterForm(){ const [loading,setLoading]=useState(false); async function onSubmit(e:any){ e.preventDefault(); setLoading(true); const fd=new FormData(e.target); const body={ district: fd.get('district'), bedrooms: Number(fd.get('bedrooms')), priceMax: Number(fd.get('priceMax')), ageMax: Number(fd.get('ageMax')), parkingMin: Number(fd.get('parkingMin')), areaMin: Number(fd.get('areaMin')), zones: [] }; const res=await fetch('/api/search',{method:'POST',body:JSON.stringify(body),headers:{'Content-Type':'application/json'}}); const js=await res.json(); window.dispatchEvent(new CustomEvent('b369:search:results',{detail:js})); setLoading(false);} return (<form onSubmit={onSubmit} style={{background:'#fff',padding:12,borderRadius:8}}><h3>Filtros</h3><div><label>Distrito*</label><input name='district' defaultValue='Miraflores'/></div><div><label>Dormitorios*</label><input name='bedrooms' type='number' defaultValue={3}/></div><div><label>Precio máx*</label><input name='priceMax' type='number' defaultValue={250000}/></div><div><label>Antigüedad máx*</label><input name='ageMax' type='number' defaultValue={10}/></div><div><label>Estacionamientos mín*</label><input name='parkingMin' type='number' defaultValue={1}/></div><div><label>Área mín*</label><input name='areaMin' type='number' defaultValue={80}/></div><div style={{marginTop:8}}><button type='submit'>{loading? 'Buscando...':'Buscar'}</button></div></form>);}
